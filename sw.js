/* ! speed-kit 1.19.0 | Copyright (c) 2019 Baqend GmbH */ "use strict";const t="accept",e=`${t}-language`,s="content-language",i="content-type";function r(t){const e=t.lastIndexOf(".");return-1===e||t.lastIndexOf("/")>e?"":t.substr(e).toLowerCase()}var n;function a(e){const s=function(t){for(const e of Object.values(n))if(e===t)return e;return n.Undefined}(e.destination||"");if(s!==n.Undefined)return e.url,s;const i=function(t){const e=[];return t&&"*/*"!==t?((t.includes("text/html")||t.includes("application/xhtml+xml"))&&e.push(n.Document),t.includes("text/css")&&e.push(n.Style),(t.includes("text/javascript")||t.includes("application/javascript")||t.includes("application/wasm"))&&e.push(n.Script),t.includes("image/")&&e.push(n.Image),t.includes("font/")&&e.push(n.Font),t.includes("video/")&&e.push(n.Video),t.includes("audio/")&&e.push(n.Audio),t.includes("text/vtt")&&e.push(n.Track),1===e.length?e[0]:n.Undefined):n.Undefined}(e.headers.get(t)||"");if(i!==n.Undefined)return e.url,i;if("navigate"===e.mode)return n.Document;const{pathname:a}=new URL(e.url),o=function(t){switch(t){case".js":case".mjs":case".wasm":case".wast":return n.Script;case".html":case".htm":return n.Document;case".css":return n.Style;case".woff2":case".woff":case".ttf":case".otf":case".eot":return n.Font;case".mp3":case".wav":return n.Audio;case".vtt":return n.Track;case".png":case".jpeg":case".jpg":case".gif":case".svg":case".ico":case".webp":return n.Image;case".mp4":case".ogg":case".ogv":case".webm":return n.Video;default:return n.Undefined}}(r(a));return o!==n.Undefined?(e.url,o):a.endsWith("/")?n.Document:n.Undefined}!function(t){t.Document="document",t.Audio="audio",t.Video="video",t.Track="track",t.Image="image",t.Style="style",t.Script="script",t.Font="font",t.Undefined="undefined"}(n||(n={}));const o=[n.Document,n.Script,n.Style,n.Undefined];function c(t,e){const s=t.contentType,i=new URL(t.originalRequest.url);return!e&&s===n.Script||!function(t,e){const{pathname:s}=t,i=".svg"===r(s);return o.includes(e)||i}(i,s)}function h(t,e){var s={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(s[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r=0;o--)(r=t[o])&&(a=(n<3?r(a):n>3?r(e,s,a):r(e,s))||a);return n>3&&a&&Object.defineProperty(e,s,a),a}const u=new Map;class d{constructor(t,e){this.clientId=t,this.url=e}static fromClientID(t){const e=u.get(t);if(!e){const e=clients.get(t),s=new d(t,e.then(t=>t.url).catch(()=>""));return u.set(t,s),s}return e}static fromNavigateURL(t){return new d("",Promise.resolve(t))}}function p(t){return[].concat(t)}function m(t,...e){return"number"==typeof t&&Number.isNaN(t)?function(t){for(const e of t)if("number"==typeof e&&Number.isNaN(e))return!0;return!1}(e):e.indexOf(t)>=0}const g=[240,375,576,768,992,1200,1920,2560,3840];function f(t){return g.find(e=>t<=e)||t}function w(t){if(t.clientHintWidth)return new Map([["width",`${f(t.clientHintWidth)}`]]);if(!t.downscale)return new Map;if(t.maxHeight)return new Map([["height",`${t.maxHeight}`]]);const e=function(t){const{screenWidth:e,screenDPR:s}=t;return f(e*(s*(t.screenSizeFactor||1)))}(t),s=t.maxWidth?t.maxWidth:e;return isFinite(s)&&s>0?new Map([["width",`${s}`]]):new Map}function v(t,e){const s=3&e.length,i=e.length-s,r=3432918353,n=461845907;let a,o,c,h;for(a=t,h=0;h>>16)*r&65535)<<16)&4294967295)<<15|c>>>17))*n+(((c>>>16)*n&65535)<<16)&4294967295)<<13|a>>>19))+((5*(a>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(c=0,s){case 3:c^=(255&e.charCodeAt(h+2))<<16;case 2:c^=(255&e.charCodeAt(h+1))<<8;case 1:a^=c=(65535&(c=(c=(65535&(c^=255&e.charCodeAt(h)))*r+(((c>>>16)*r&65535)<<16)&4294967295)<<15|c>>>17))*n+(((c>>>16)*n&65535)<<16)&4294967295}return a^=e.length,a=2246822507*(65535&(a^=a>>>16))+((2246822507*(a>>>16)&65535)<<16)&4294967295,a=3266489909*(65535&(a^=a>>>13))+((3266489909*(a>>>16)&65535)<<16)&4294967295,(a^=a>>>16)>>>0}function y(t){const e=Array.from(t).map(t=>String.fromCharCode(t)).join("");return btoa(e).replace(/(?:A(?:AAA|AA=|A==))+$/,"")}class A{constructor(t,e,s){this.AS=t,this.AT=e,this.AU=s}static fromJSON(t){return new A((e=t.b,Uint8Array.from([...atob(e)].map(t=>t.charCodeAt(0)))),t.m,t.h);var e}contains(t){return this.AQ(t).every(t=>this.AR(t))}toJSON(){return{b:y(this.AS),m:this.AT,h:this.AU}}AQ(t){const e=[],s=v(0,t),i=v(s,t);for(let t=0;t>3];if(e){return 0!=(e&1<<(7&t))}return!1}}var b;!function(t){t[t.OK=200]="OK",t[t.BaqendRedirect=231]="BaqendRedirect",t[t.MovedPermanently=301]="MovedPermanently",t[t.MovedTemporarily=302]="MovedTemporarily",t[t.NotModified=304]="NotModified",t[t.PermanentRedirect=308]="PermanentRedirect",t[t.BadRequest=400]="BadRequest",t[t.Forbidden=403]="Forbidden",t[t.InternalServerError=500]="InternalServerError",t[t.BadGateway=502]="BadGateway",t[t.FetchTypeError=542]="FetchTypeError"}(b||(b={}));const S="baqend-speedkit",B=`${S}-store`,R="default",k="baqend-speed-kit",O="bqpassthrough",N="bqpreloadrequest";function q(t){const e=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];let s=null;if(/trident/i.test(e[1]))return s=/\brv[ :]+(\d+)/g.exec(t)||[],["IE",parseInt(s[1],10)||0];if("Chrome"===e[1]){if(null!=(s=t.match(/\bEdge\/(\d+)/)))return["Edge",parseInt(s[1],10)];if(null!=(s=t.match(/\bOPR\/(\d+)/)))return["Opera",parseInt(s[1],10)]}const i=e[2]?[e[1],parseInt(e[2],10)]:[navigator.appName,parseInt(navigator.appVersion,10)];return-1===t.indexOf("Android")&&null!=(s=t.match(/version\/(\d+)/i))&&i.splice(1,1,parseInt(s[1],10)),i}function x(t){return new Promise(e=>setTimeout(e,t))}function E(t){const[e]=q(navigator.userAgent);return"Safari"===e?async function t(e){const s=Date.now();if(e<10)return;if(e<500)return x(e);await x(500);const i=Date.now()-s;return t(e-i)}(t):x(t)}function C(t=null){if(!t)return new Map;const e=t.split(";").map(t=>t.split("=",2));return new Map(e)}function I(t){const e=t.headers.get("date")||"";return Date.parse(e)}class P{constructor(t){this.public=t.has("public"),this.private=t.has("private"),this.noCache=t.has("no-cache"),this.onlyIfCached=t.has("only-if-cached"),this.maxAge=t.get("max-age"),this.swMaxAge=t.get("sw-max-age"),this.maxStale=t.get("max-stale"),this.minFresh=t.get("min-fresh"),this.staleWhileRevalidate=t.get("stale-while-revalidate"),this.staleIfError=t.get("stale-if-error"),this.mustRevalidate=t.has("must-revalidate"),this.proxyRevalidate=t.has("proxy-revalidate"),this.immutable=t.has("immutable"),this.noStore=t.has("no-store"),this.noTransform=t.has("no-transform")}static fromString(t){const e=t.split(/,\s*/).map(t=>t.split("=",2)).map(([t,e])=>[t,e?parseInt(e,10):-1]),s=new Map(e);return new P(s)}}function D(t,e){return P.fromString(t.headers.get(e)||"")}function L(t,e){const s=D(t,"cache-control"),i=D(t,"baqend-sw-control"),r=function(...t){for(const e of t)if(null!=e)return e;return null}(s.swMaxAge,i.maxAge,s.maxAge);if(t.headers.has("date")&&null!=r){const s=function(t,e,s=0){const i=t.headers.get(e);return null==i?s:parseInt(i,10)}(t,"age"),i=I(t)+e,n=(new Date(i-e),i+1e3*(r-s));return Date.now(),Date.now()>n}return null}async function H(t,e,s){const r=e.headers.get(i);if(!r.startsWith("application/json"))throw new Error(`Weird server reply: ${r}`);const n=await e.json();t.clearRevalidationWhitelist(),t.update(Object.assign({},s,{body:n}))}class U{constructor(t,e){this.urls=t,this.contentTypes=e,this.urlRegExp=function(t){const e=[];if(t&&e.push(...[...t].map(t=>`^${function(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}(t).replace(/\\\*/g,".*")}$`)),e.length)return new RegExp(e.join("|"))}(t)}static fromJSON(t){const e=t=>{if(t&&t.length)return new Set(t)};return new U(e(t.urls),e(t.contentTypes))}match(t,e){let s=!0;return this.contentTypes&&e!==n.Undefined&&(s=s&&this.contentTypes.has(e)),this.urlRegExp&&(s=s&&!!t.match(this.urlRegExp)),s}toJSON(){const t=t=>{if(t)return[...t]};return{urls:t(this.urls),contentTypes:t(this.contentTypes)}}}function T(t){return function(e){return class extends e{async handle(e,s,i){if(!this.EW(s))return!1;const{type:r}=s,n=h(s,["type"]);return t===r&&super.handle(e,n,i)}EW(t){return!!t&&"object"==typeof t&&"string"==typeof t.type}}}}function M(t){return function(e){return class extends e{cachePath(){return t}}}}function*J(t,e){for(const s of t)yield*e(s)}class F{constructor(t){if(this[Symbol.toStringTag]="MultiMap",this.EH=new Map,t)for(const[e,s]of t)this.EH.has(e)?this.EH.get(e).add(s):this.EH.set(e,new Set([s]))}get size(){return t=this.values(),[...t].length;var t}[Symbol.iterator](){return this.entries()}entries(){return J(this.EH.entries(),([t,e])=>(function*(t,e){for(const s of t)yield e(s)})(e,e=>[t,e]))}keys(){return this.EH.keys()}values(){return J(this.EH.values(),t=>t.keys())}clear(){this.EH.clear()}delete(t){return this.EH.delete(t)}forEach(t,e){for(const[s,i]of this.entries())t.call(e,i,s,this)}map(t,e){return new F([...this.entries()].map(([s,i])=>t.call(e,i,s,this)))}filter(t,e){return new F([...this.entries()].filter(([s,i])=>t.call(e,i,s,this)))}filterKey(t,e){return new F([...this.entries()].filter(([s])=>t.call(e,s,this)))}getAll(t){const e=this.EH.get(t);if(!e){const e=new Set;return this.EH.set(t,e),e}return e}get(t){return function(t){const[e]=t;return e}(this.getAll(t))}has(t){return this.EH.has(t)}add(t,e){return this.getAll(t).add(e),this}set(t,e){const s=this.getAll(t);return s.clear(),s.add(e),this}setAll(t,e){const s=this.getAll(t);s.clear();for(const t of e)s.add(t);return this}}class W{constructor(){this.CA=[]}observe(t){this.CA.push(t)}notify(){for(const t of this.CA)t()}}let j=class extends W{constructor(t){super(),this.revalidationWhitelist=new Set,this.refreshJobs=new F,this.B4=0,this.B5=R,this.B6=null,this.B3=t}addToRevalidationWhitelist(t){this.revalidationWhitelist.add(t)}clearRevalidationWhitelist(){this.revalidationWhitelist.clear()}isExpired(){return null==this.maxAge||this.maxAget.getTime()>=i);for(const s of r.values())if(s.match(t,e))return JSON.stringify(s.toJSON()),!0;return!1}getDrift(){return this.B4}getClientRevision(){return this.B5}getServerRevision(){return this.B6}update(t){void 0!==t.body&&this.B2(t.body),void 0!==t.maxAge&&(this.maxAge=t.maxAge),void 0!==t.drift&&(this.B4=t.drift),void 0!==t.clientRevision&&(this.B5=t.clientRevision),void 0!==t.serverRevision&&(this.B6=t.serverRevision),this.notify()}purge(){this.bloomFilter=void 0,this.maxAge=void 0,this.revalidationWhitelist.clear(),this.notify()}isInitialized(){return void 0!==this.bloomFilter&&void 0!==this.maxAge}toJSON(){return{maxAge:this.maxAge,body:this.B0(),drift:this.B4,clientRevision:this.B5,serverRevision:this.B6}}fromJSON(t){this.B4=t.drift,this.B2(t.body),t.maxAge&&(this.maxAge=t.maxAge),void 0!==t.clientRevision&&(this.B5=t.clientRevision),void 0!==t.serverRevision&&(this.B6=t.serverRevision)}B0(){if(!this.bloomFilter)return;const t=this.B1();return Object.assign({},this.bloomFilter.toJSON(),{r:t})}B1(){if(this.refreshJobs.size)return[...this.refreshJobs.map((t,e)=>[e.getTime(),t.toJSON()])]}B2(t){if(this.refreshJobs.clear(),t&&(this.bloomFilter=A.fromJSON(t),t.r))for(const[e,s]of t.r)this.refreshJobs.add(new Date(e),U.fromJSON(s))}};j=l([M("/com.baqend.speedkit.clock")],j);class ${constructor(t=""){this.B7=new Map,t&&this.fromString(t)}clear(){this.B7.clear()}fromString(t){this.clear();const e=t.trim();if(!e)return;const s=e.split(/\s*;\s+/);for(const t of s){const[e,s]=t.split(/\s*=\s*/,2);this.B7.set(e,s)}}toString(){return[...this.B7].map(([t,e])=>`${t}=${e}`).join("; ")}getItem(t){return this.B7.get(t)}keys(){return this.B7.keys()}entries(){return this.B7.entries()}}let z=class extends W{constructor(){super(),this.B8=new Map}getCookies(t){return this.B8.get(t)||new $}updateCookies(t,e){this.B8.set(t,new $(e)),this.notify()}toJSON(){return{origins:[...this.B8].map(([t,e])=>[t,e.toString()])}}fromJSON(t){if("string"==typeof t)return this.fromJSON({origins:[[location.origin,t]]}),void this.notify();const{origins:e}=t;this.B8.clear();for(const[t,s]of e)this.B8.set(t,new $(s));this.B8}};z=l([M("/com.baqend.speedkit.cookie")],z);let K=class extends W{isFirstLoadHandled(){return void 0===this.firstLoad||this.firstLoad}firstLoadHandled(){this.firstLoad=!1,this.notify()}toJSON(){return{firstLoad:this.firstLoad}}fromJSON(t){this.firstLoad=t.firstLoad}};function G(t){if("string"!=typeof t)return null;const e=/^regexp:\/(.*)\/([\w]*)$/.exec(t);if(e){const[,t,s]=e;return new RegExp(t,s)}return null}function Q(t){return JSON.parse(t,(t,e)=>"string"==typeof e&&G(e)||e)}K=l([M("/com.baqend.speedkit.load")],K);let V=class extends W{constructor(){super(...arguments),this.dpr=1,this.width=1/0}fromJSON(t){this.dpr=t.dpr||1,this.width=t.width||1/0}toJSON(){return{dpr:this.dpr,width:this.width}}};function Y(t,...e){const s=t.toLowerCase();return e.some(t=>"string"==typeof t?s.includes(t):t.test(s))}V=l([M("/com.baqend.speedkit.screen")],V);const _=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(?:browser|link)|vodafone|wap|windows ce|xda|xiino/,Z=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br[ev]w|bumb|bw\-[nu]|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c[- ]|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/;function X(t){return Y(t,"tablet","ipad","nexus 7","nexus 10","silk/",/\bgt-[pn]\d{4}\b/)}function tt(t){return Y(t,"appletv","apple tv","googletv","crkey","armv7l","aftt","aftm","roku","bravia","philipstv","tsbnettv","smarttv",/\btv\b/)}function et(t,e){if(!e)return t.toString();try{return new URL(e).toString()}catch(s){if(e.startsWith("//"))return`${t.protocol}${e}`;if(e.startsWith("/"))return`${t.origin}${e}`;const i=function t(e){return e.startsWith("/")?t(e.substr(1)):e}(t.pathname).split("/"),r=e.split("/");i.pop();for(const t of r)".."===t?i.pop():"."===t||i.push(t);return`${t.origin}/${i.join("/")}`}}class st{}st.propName="";class it extends st{constructor(t=[]){super(),this.EY=t}matches(t,e){return!!this.EY.length&&this.EY.every(s=>s.matches(t,e))}toJSON(){const t={};for(const e of this.EY){t[e.constructor.propName]=e.toJSON()}return t}fromJSON(t){if("string"==typeof t)return this.fromJSON(Q(t));for(const[e,s]of Object.entries(t)){if(!vt[e])throw new Error(`Illegal rule: ${e}`);{const t=new vt[e];t.fromJSON(s),this.addCondition(t)}}return this}addCondition(t){return this.EY.push(t)}removeCondition(t){const e=this.EY.indexOf(t);return!(e<0)&&(this.EY.splice(e,1),!0)}}function rt(t,e){return e instanceof Array?e.some(e=>rt(t,e)):e instanceof RegExp?e.test(t):t.startsWith(e)}class nt extends st{constructor(t=[]){super(),this.EZ=t}matches(t,e){if(!this.EZ.length)return!1;const s=a(t),i=this.EZ.includes(s);return i}toJSON(){return this.EZ}fromJSON(t){if("string"==typeof t)return this.fromJSON(Q(t));if(t instanceof Array)return this.EZ=t,this;throw new Error("Invalid ContentTypeCondition JSON")}}nt.propName="contentType";class at extends st{constructor(t){super(),this.Ee=t}test(t){return null!=this.Ee&&rt(t,this.Ee)}toJSON(){return this.Ee?function t(e){return e instanceof Array?e.map(e=>t(e)):e instanceof RegExp?`regexp:/${(s=e).source}/${s.flags||""}`:e;var s}(this.Ee):null}fromJSON(t){if(null==t||"null"===t)return this.Ee=null,this;try{return this.fromJSON(Q(t))}catch(t){}return this.Ee=t,this}}class ot extends at{matches(t,e){if(!e)return!1;if(!t.url.startsWith(location.origin))return location.origin,!1;const s=[...e.entries()].some(t=>this.test(`${t[0]}=${t[1]}`));return s}}ot.propName="cookie";class ct extends st{matches(t,e){const s=t.headers.get("user-agent")||navigator.userAgent;return!s||(this.constructor.name,this.userAgentMatches(s),this.userAgentMatches(s))}toJSON(){return!0}fromJSON(t){return this}}class ht extends ct{userAgentMatches(t){return function(t){return Y(t,"wow64","windows nt","win64","msie","macintosh;","linux x86_64")}(t)}}function lt(t){const[,e,s,i,r,n,a]=/^(?:(https?:)\/\/)?(([\w.-]+)(?::(\d+))?)([^#]*)(#.*)?$/.exec(t);return{protocol:e,host:s,hostname:i,port:r,pathname:n,hash:a}}ht.propName="desktop";class ut extends at{matches(t,e){return this.test(lt(t.url).host)}}ut.propName="host";class dt extends ct{userAgentMatches(t){return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(?:browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br[ev]w|bumb|bw\-[nu]|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c[- ]|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}}dt.propName="mobile";class pt extends at{matches(t,e){return this.test(lt(t.url).pathname)}}pt.propName="pathname";class mt extends st{constructor(t=[]){super(),this.Ea=t}get size(){return this.Ea.length}toJSON(){return this.Ea.map(t=>t.toJSON())}fromJSON(t){if(t instanceof Array)return this.Ea=t.map(t=>(new it).fromJSON(t)),this;throw new Error("Invalid RuleSet JSON")}matches(t,e){return this.Ea.some(s=>s.matches(t,e))}[Symbol.iterator](){return this.Ea[Symbol.iterator]()}addRule(t){return this.Ea.push(t)}removeRule(t){const e=this.Ea.indexOf(t);return!(e<0)&&(this.Ea.splice(e,1),!0)}}class gt extends ct{userAgentMatches(t){return X(t)}}gt.propName="tablet";class ft extends ct{userAgentMatches(t){return tt(t)}}ft.propName="tv";class wt extends at{matches(t,e){return this.test(function(t){const[,e]=/^(?:(?:\w+?:)?\/\/)?(.*)$/.exec(t);return e}(t.url))}}wt.propName="url";const vt={[nt.propName]:nt,[ot.propName]:ot,[ht.propName]:ht,[ut.propName]:ut,[dt.propName]:dt,[pt.propName]:pt,[gt.propName]:gt,[ft.propName]:ft,[wt.propName]:wt};var yt,At;!function(t){t.LOAD="load",t.SPEED_KIT_DYNAMIC_LOADED="speed-kit-dynamic-loaded"}(yt||(yt={}));const bt=2;let St=At=class extends W{constructor(t){super(),this.CD=null,this.CE=null,this.CF=!0,this.properties=At.getDefaults(),this.CC=t}get appURL(){if(!this.optionalAppURL)throw new Error("Options are not initialized yet.");return this.optionalAppURL}get reconnectInterval(){return this.properties.reconnectInterval}get refreshInterval(){return 1e3*this.properties.refreshInterval}get relativeModuleImports(){return this.properties.relativeModuleImports}get staleWhileRevalidate(){return 1e3*this.properties.staleWhileRevalidate}get preloadBloomFilter(){return this.properties.preloadBloomFilter}get navigationPreload(){return this.properties.navigationPreload}get cachingDisabled(){return this.properties.disableCache}get preloadDynamicBlocks(){return this.properties.preloadDynamicBlocks}get sdnSetup(){return this.properties.sdnSetup}shouldCacheRequest(t,e=!1){const{request:s,cookies:i}=t;return!this.properties.disableCache&&(!(this.properties.whitelist.size&&!this.properties.whitelist.matches(s,i))&&(!this.properties.blacklist.matches(s,i)&&(!!e||(this.properties.enabledSites.size&&t.isNavigateRequest()&&(this.CF=this.properties.enabledSites.matches(s,i)),this.CF))))}shouldDelayRequest(t){const e=this.properties.delayed.some(e=>e.rules.matches(t.request,t.cookies)),s=a(t.request),i=[n.Script,n.Image];return e&&!!s&&i.includes(s)}async isEnabledOnSite(t){if(t.isNavigateRequest())return!0;return 0!==(await t.getNavigateUrl()).length&&this.CB(t,this.properties.enabledSites)}isEnabledOnURL(t,e=this.properties.enabledSites){if(!e.size)return!0;const s=e.matches(new Request(t));return s}async CB(t,e){return!e||!e.size||(t.isNavigateRequest()?e.matches(t.originalRequest,t.cookies):this.isEnabledOnURL(await t.navigation.url,e))}getUserAgentClass(t){if(!this.properties.userAgentDetection||!this.properties.userAgentDetection.matches(t))return null;const e=t.headers.get("user-agent")||navigator.userAgent||navigator.vendor,s="navigate"===t.mode&&e!==this.CE;return null==this.CD||s?(this.CE=e,Y(i=e,_)||Y(i.substr(0,4),Z)?this.CD="mobile":X(e)?this.CD="tablet":this.CD=tt(e)?"tv":"desktop"):this.CD;var i}async shouldFetchOrigin(t){if(-1===this.properties.fetchOriginInterval)return!1;if(0===this.properties.fetchOriginInterval)return!0;const e=Math.floor(Date.now()/1e3);if((await this.CC.get("/fetch-origin-time")||e)<=e){const t=e+this.properties.fetchOriginInterval+bt;return await this.CC.set("/fetch-origin-time",t),!0}return!1}getDelayOptions(t){const e=At.getDelayDefaults();for(const s of this.properties.delayed){(!s.rules||s.rules.matches(t.originalRequest))&&(s.options,Object.assign(e,s.options))}return e}async getImageOptions(t){const e=At.getImageDefaults();if(this.properties.image instanceof Array){for(const s of this.properties.image){if(!s.rules||s.rules.matches(t.originalRequest)){await this.CB(t,s.enabledSites)&&(s.options,Object.assign(e,s.options))}}return e}return Object.assign(e,this.properties.image)}shouldStripQueryParameter(t,e){return!!this.properties.stripQueryParams.length&&rt(t,e)}async getQueryParameterStripConditions(t){let e=[];for(const s of this.properties.stripQueryParams){if(!s.rules||s.rules.matches(t.originalRequest)){(!s.enabledSites||await this.CB(t,s.enabledSites))&&(e=e.concat(s.params))}}return e}hasCriticalResources(){return!!this.properties.criticalResources.length}async getCriticalResources(t){const e=[];for(const{enabledOn:s,resources:i}of this.properties.criticalResources)await this.CB(t,s)&&e.push(...i);return e.filter((t,s)=>e.indexOf(t)===s)}getSplitTestId(){return this.properties.splitTestId}getGroup(){return this.properties.group}toJSON(){const t=this.properties.delayed.map(t=>({options:t.options,rules:t.rules.toJSON()})),e=this.properties.image instanceof Array?this.properties.image.map(t=>({options:t.options,enabledSites:t.enabledSites&&t.enabledSites.toJSON(),rules:t.rules&&t.rules.toJSON()})):this.properties.image,s=this.properties.criticalResources.map(t=>({enabledOn:t.enabledOn&&t.enabledOn.toJSON(),resources:t.resources})),i=this.properties.stripQueryParams.map(t=>({enabledSites:t.enabledSites&&t.enabledSites.toJSON(),rules:t.rules&&t.rules.toJSON(),params:t.params})),r=new URL(this.appURL);let n,a="local";return r.host.endsWith(".app.baqend.com")?a=r.host.substring(r.host.length-".app.baqend.com".length):n=r.host,{appName:a,appDomain:n,delayed:t,image:e,criticalResources:s,stripQueryParams:i,splitTestId:this.properties.splitTestId,group:this.properties.group,blacklist:this.properties.blacklist.toJSON(),whitelist:this.properties.whitelist.toJSON(),enabledSites:this.properties.enabledSites.toJSON(),disableCache:this.properties.disableCache,userAgentDetection:this.properties.userAgentDetection.toJSON(),fetchOriginInterval:this.properties.fetchOriginInterval,preloadBloomFilter:this.properties.preloadBloomFilter,navigationPreload:this.properties.navigationPreload,reconnectInterval:this.properties.reconnectInterval,refreshInterval:this.properties.refreshInterval,staleWhileRevalidate:this.properties.staleWhileRevalidate}}fromJSON(t){const{sw:e,scope:s,disabled:i}=t,r=h(t,["sw","scope","disabled"]),{appName:n,appDomain:a}=r,o=h(r,["appName","appDomain"]);this.optionalAppURL=`https://${a||`${n}.app.baqend.com`}/v1`,this.optionalAppURL;const c=At.getDefaults(),{maxStaleness:l,refreshInterval:u}=o,d=h(o,["maxStaleness","refreshInterval"]),p=u||l&&l/1e3||c.refreshInterval,{whitelist:m,blacklist:g,delayed:f,stripQueryParams:w,enabledSites:v,criticalResources:y,image:A,userAgentDetection:b}=d,S=h(d,["whitelist","blacklist","delayed","stripQueryParams","enabledSites","criticalResources","image","userAgentDetection"]);this.properties=Object.assign({},c,{refreshInterval:p,userAgentDetection:this.getUserAgentRuleSet(b||!1),whitelist:(new mt).fromJSON(m||[]),blacklist:(new mt).fromJSON(g||[]),enabledSites:(new mt).fromJSON(v||[]),stripQueryParams:At.initStripParams(w),delayed:At.initDelayed(f),criticalResources:At.initCriticalResources(y),image:At.initImage(A)},S)}getUserAgentRuleSet(t){const e=new mt;return"boolean"==typeof t?t&&e.addRule(new it([new wt("")])):e.fromJSON(t),e}static getDefaults(){return{blacklist:new mt,criticalResources:[],delayed:[{rules:new mt,options:this.getDelayDefaults()}],disableCache:!1,enabledSites:new mt,fetchOriginInterval:-1,image:this.getImageDefaults(),preloadBloomFilter:!0,preloadDynamicBlocks:!1,navigationPreload:!1,reconnectInterval:6e4,refreshInterval:300,relativeModuleImports:!1,sdnSetup:!1,staleWhileRevalidate:1800,stripQueryParams:[],userAgentDetection:new mt,whitelist:new mt,splitTestId:"",group:""}}static getDelayDefaults(){return{event:yt.LOAD,timeout:1e3}}static getImageDefaults(){return{downscale:!0,screenSizeFactor:1,maxWidth:!1,maxHeight:!1,quality:85,webp:!0,pjpeg:!0,crop:!1,overrideWidth:!1,overrideHeight:!1}}static initDelayed(t){return t?t.some(t=>t.hasOwnProperty("rules"))?t.map(t=>({rules:(new mt).fromJSON(t.rules),options:t.options})).reverse():[{rules:(new mt).fromJSON(t),options:this.getDelayDefaults()}]:[{rules:new mt,options:this.getDelayDefaults()}]}static initStripParams(t){if(!t)return[];return t instanceof Array&&t.some(t=>"object"==typeof t&&t.params)?t.map(t=>({enabledSites:t.enabledSites&&(new mt).fromJSON(t.enabledSites),rules:t.rules&&(new mt).fromJSON(t.rules),params:t.params})):[{params:t}]}static initImage(t){return t?t instanceof Array?t.map(t=>({enabledSites:t.enabledSites&&(new mt).fromJSON(t.enabledSites),rules:t.rules&&(new mt).fromJSON(t.rules),options:At.normalizeImageOptions(t.options)})).reverse():At.normalizeImageOptions(t):{}}static normalizeImageOptions(t){return"number"==typeof t.quality?t.quality=Math.max(1,Math.min(100,Math.round(t.quality))):!1===t.quality&&(t.quality=100),t}static initCriticalResources(t=[]){return t.length?t.map(At.makeResourceRule).map(At.normalizeResourceURLs).map(At.instantiateResourceEnabledOn):[]}static makeResourceRule(t){return"string"==typeof t?{resources:[t]}:t}static normalizeResourceURLs({enabledOn:t,resources:e}){const s=new URL(location.href);return{enabledOn:t,resources:e.map(t=>et(s,t))}}static instantiateResourceEnabledOn({enabledOn:t,resources:e}){return{enabledOn:t&&(new mt).fromJSON(t),resources:e}}};function Bt(t,e){return void 0===t?e:t}St=At=l([M("/com.baqend.speedkit.config")],St);class Rt{constructor(t){this.isFetched=!1,this.dependent=new Set,this.originalRequest=t.request,this.request=t.request,this.AA=t.awaiter,this.navigation=t.navigation,this.cookies=t.cookies,this.$=t.navigateRequest,this._=Bt(t.critical,!1),this.preloadResponse=t.preloadResponse,this.prewarm=Bt(t.prewarm,!1),this.marks=Bt(t.marks,new Map),this.dependsOn=t.dependsOn,this.contentType=t.contentType}static create(t,e={},s=(()=>{})){const i=d.fromNavigateURL(t),{navigation:r=i,cookies:n=new $,critical:o=!1}=e,c=h(e,["navigation","cookies","critical"]),l=new Request(t,c),u="navigate"===e.mode,p=a(l);return new Rt({request:l,navigation:r,cookies:n,critical:o,navigateRequest:u,contentType:p,awaiter:s,prewarm:e.prewarm,marks:e.marks,dependsOn:e.dependsOn})}static fromEvent(t,e=new $){const{request:s,preloadResponse:i}=t,r="navigate"===s.mode,n=r?d.fromNavigateURL(s.url):d.fromClientID(t.clientId),o=a(s);return new Rt({request:s,awaiter:e=>t.waitUntil(e),navigation:n,cookies:e,navigateRequest:r,contentType:o,preloadResponse:i})}createSubRequest(t,e){return Rt.create(t,Object.assign({marks:new Map(this.marks)},e),this.AA)}waitUntil(...t){this.AA(Promise.all(t))}get url(){return new URL(this.request.url)}get headers(){return new Headers(this.request.headers)}get timings(){if(!this.marks.size)return null;const t=Object.create(null);for(const[e,s]of this.marks)t[e]=s;return t}mark(t){this.marks.set(t,Date.now())}isNavigateRequest(){return this.$}isCritical(){return this._}isSameOrigin(){return this.url.origin===location.origin}get modifying(){return"GET"!==this.request.method&&"HEAD"!==this.request.method}set url(r){const n=r.toString();this.url.toString()!==n&&(this.request=function(r,n,a={}){const o=new Headers,c=[t,e,s,i];for(const[t,e]of r.headers)c.includes(t.toLocaleLowerCase())&&o.append(t,e);const h={headers:o,credentials:"omit"};return"navigate"!==r.mode&&(h.mode=r.mode),new Request(n,Object.assign(h,a))}(this.request,n))}set headers(t){this.request=new Request(this.request,{headers:t})}set method(t){this.method!==t&&(this.request=new Request(this.request,{method:t}))}get method(){return this.request.method.toUpperCase()}set mode(t){this.request.mode!==t&&(this.request=new Request(this.request,{mode:t}))}set cache(t){this.request.cache!==t&&(this.request=new Request(this.request,{cache:t}))}markAsFetched(){this.isFetched=!0;for(const t of this.dependent)this.dependent.delete(t),t()}async fetch(){this.mark("fetchStart"),this.dependsOn&&(this.dependsOn,this.dependsOn.isFetched),this.dependsOn&&!this.dependsOn.isFetched&&await new Promise(t=>{this.dependsOn.dependent.add(t)}),this.method,this.url.pathname;const t=fetch(this.request);this.markAsFetched();const e=await t;return this.mark("fetchEnd"),e}async getNavigateUrl(){return this.isNavigateRequest()?this.originalRequest.url:this.navigation.url}fetchOriginal(){return this.method,this.url.pathname,fetch(this.originalRequest)}toString(){return this.isSameOrigin()?`${this.method} ${this.url.pathname}`:`${this.method} ${this.url}`}}var kt;const Ot=Symbol("State"),Nt=Symbol("Waiters");class qt{constructor(t=""){this[kt]=new Map,this[Ot]=t}get state(){return this[Ot]}waitUntil(...t){if(!t.length)throw new TypeError("You must wait for at least one desired state.");return t.indexOf(this.state)>=0?Promise.resolve(this.state):Promise.race(t.map(t=>this.AB(t)))}transition(t){const e=this[Ot];return t===e?e:(this[Ot]=t,this.AC(t),e)}AB(t){return new Promise(e=>{const s=this[Nt].get(t)||[];s.push(e),this[Nt].set(t,s)})}AC(t){const e=this[Nt].get(t)||[];this[Nt].delete(t);for(const s of e)s(t)}}var xt,Et,Ct;kt=Nt,function(t){t.INSTALLING="installing",t.RUNNING="running",t.FAILED="failed"}(xt||(xt={}));function It(t,e,s,i){return Promise.resolve(t).then(t=>new Promise((r,n)=>{const a=t.transaction(e,s),o=Promise.resolve(i(a.objectStore(e)));a.oncomplete=(()=>o.then(r)),a.onabort=a.onerror=(()=>n(a.error))}))}function Pt(t,e,s){return It(t,e,"readwrite",s)}async function Dt(t,e={}){const s=await t.blob();return new Response(s,e)}!function(t){t.Blacklist="Blacklist",t.CacheHit="CacheHit",t.CacheMiss="CacheMiss",t.ClientError="ClientError",t.CriticalResource="CriticalResource",t.Delayed="Delayed",t.Disabled="Disabled",t.Disconnected="Disconnected",t.DynamicBlock="DynamicBlock",t.DynamicBlockPreload="DynamicBlockPreload",t.Error="Error",t.Fallback="Fallback",t.IgnoredAfterPOSTNavigate="IgnoredAfterPOSTNavigate",t.LoopDetected="LoopDetected",t.NavigationPreload="NavigationPreload",t.Offline="Offline",t.Onboarding="Onboarding",t.Unknown="Unknown"}(Et||(Et={})),function(t){t.AssetAPI="AssetAPI",t.Generated="Generated",t.None="None",t.Origin="Origin",t.SwCache="SwCache"}(Ct||(Ct={}));class Lt{constructor(t,e,s,i){this.request=s,this.response=i,this.cause=e,this.source=t}waitUntil(...t){this.request.waitUntil(...t)}clone(t){return new Lt(this.source,this.cause,t,this.response&&this.response.then(t=>t.clone()))}}function Ht(t,e,s,i){e&&t.markAsFetched();const r=i?Promise.resolve(i):void 0;return new Lt(Ct.Origin,s,t,r)}function Ut(t,e,s,i){e&&t.markAsFetched();const r=i?Promise.resolve(i):void 0;return new Lt(Ct.SwCache,s,t,r)}function Tt(t,e,s,i){e&&t.markAsFetched();const r=i?Promise.resolve(i):void 0;return new Lt(Ct.AssetAPI,s,t,r)}function Mt(t,e,s={},i,r=Ct.Generated){return t.markAsFetched(),new Lt(r,i,t,Promise.resolve(new Response(e,s)))}function Jt(t,e){return t.markAsFetched(),new Lt(Ct.Origin,Et.Error,t,Promise.resolve(e))}class Ft{}function Wt(t){return m(t.source,Ct.AssetAPI,Ct.SwCache)}function jt(t,e,s){const i=new Headers(t.originalRequest.headers);i.set("baqend-speed-kit-request","dynamic"),s&&i.set("baqend-speed-kit-active",e.toString()),t.headers=i}class $t{constructor(){this.EG=new Set}addRedirect(t,e){return!!this.EE(e)||(this.EF(t),!1)}EE(t){const e=t.headers.get("location");return!!e&&this.EG.has(e)}EF(t){this.EG.add(t.url)}clear(){this.EG.clear()}}function zt(t){return t.status>=b.MovedPermanently&&t.status<=b.PermanentRedirect&&t.status!==b.NotModified}class Kt{constructor(t){this.provider=t}}let Gt=class extends Kt{async handle(){return await this.provider.connect(),!0}};Gt=l([T("connect")],Gt);let Qt=class extends Kt{async handle(){return await this.provider.disconnect(),!0}};Qt=l([T("disconnect")],Qt);let Vt=class extends Kt{async handle(){return await this.provider.refreshCacheSketch(!0),!0}};Vt=l([T("fetch-bloom-filter")],Vt);let Yt=class{constructor(t){this.Bf=t}async handle(t,e,s){const i=e.clientURL;if(!s||!e||!i)return!1;const r=this.Bf.pop(i)||this.Bf.getUnknownNavigateMetadata(i);return s.postMessage(r),!0}};Yt=l([T("get-navigate-info")],Yt);let _t=class{constructor(t,e,s,i,r){this.Bi=t,this.Bj=e,this.Bk=s,this.Bl=i,this.Bm=r}async handle(t,e){if(!this.Bg(e))return!1;const s=new URL(t.url);return await this.Bh(s,e.data),!0}Bg(t){return!!t&&"object"==typeof t&&t.data instanceof Array&&t.data.every(t=>"string"==typeof t.url)}async Bh(t,e){if(this.Bi.isEnabledOnURL(t.toString()))return;if(!e.length)return;this.Bk.refreshCacheSketch();const s=d.fromNavigateURL(t.toString());for(const{url:i}of e){const e=this.Bl.getCookies(location.origin),r=!0,n=Rt.create(i,{navigation:s,cookies:e,prewarm:r}),a=n.url.origin!==t.origin;if(this.Bi.shouldCacheRequest(n,!0),await this.Bj.loadResponse(n),a&&this.Bi.shouldCacheRequest(n,!0)&&!await this.Bj.loadResponse(n))return void await this.Bm.fetch(n)}}};function Zt(t,...e){return"object"==typeof t&&void 0===t.prototype&&e.every(e=>e in t)}_t=l([T("prewarm-fetch")],_t);let Xt=class{constructor(t,e,s){this.Bo=t,this.Bp=e,this.Bq=s}async handle(t,e){return!!Zt(e,"data")&&(await this.Bn(e.data,Zt(e,"event")?e.event:void 0),!0)}async Bn(t,e){"load"===e&&(this.Bp.trackLoadEvent(),2===this.Bp.loadEventCount&&this.Bo.refreshCacheSketch(!0)),this.Bq.updateCookies(location.origin,t)}};Xt=l([T("send-cookies")],Xt);let te=class{constructor(t){this.Br=t}async handle(t){return t.id,this.Br.release(t.id),!0}};te=l([T("dom-ready")],te);const ee={MISS:"MISS",HIT:"HIT","MISS, HIT":"HIT","HIT, MISS":"SHIELD HIT","HIT, HIT":"HIT","MISS, MISS":"MISS"};class se{constructor(t){this.EJ=null,this.EK=null,this.EL=null,this.EM=!1;const e=t.get("x-cache"),s=t.get("x-timer"),i=t.get("x-served-by");t.get("etag");this.setCache(e),this.setDuration(s),this.setPoP(i),this.EI(t)}getDuration(){return this.EK}setDuration(t){if(!t)return void(this.EK=null);const e=t.match(/VS(\d+).*VE(\d+)/);this.EK=null!==e?+e[2]-+e[1]:null}setCache(t){t&&ee[t]?this.EJ=ee[t]:this.EJ=null}getCache(){return this.EJ}setPoP(t){if(!t)return void(this.EL=null);const e=t.match(/\w{3}$/);this.EL=null!==e?e[0]:null}getPoP(){return this.EL}isBackendCacheHit(){return this.EM}EI(t){this.EM=t.has("etag")}}class ie{constructor(t,e,s,i,r,n,a,o,c,h,l,u,d,p){this.swResponse=!0,this.url=t,this.enabled=e,this.served=s,this.fromOrigin=i,this.cacheHit=r,this.cdnCacheHit=a,this.cdnBackendTime=o,this.cdnPoP=c,this.firstLoad=!1,this.splitTestId=h,this.group=l,this.responseCause=p,this.responseSource=d,this.backendCacheHit=u,[this.browser,this.browserVersion]=q(navigator.userAgent),n&&(this.timings=n)}static fromContext(t,e,s,i,r,n,a){const o=t.request,c=a?new se(a.headers):null,h=!!c&&c.isBackendCacheHit();return new ie(o.originalRequest.url,e,s,i,t.source===Ct.SwCache,o.timings,c?c.getCache():null,c?c.getDuration():null,c?c.getPoP():null,r,n,h,t.source,t.cause)}}const re=new class{constructor(){this.Al=null,this.Al=this.Ak()}get(t){return(e=this.Aj(),s=B,i=(e=>e.get(t)),It(e,s,"readonly",i)).then(t=>t.result||null);var e,s,i}set(t,e){return Pt(this.Aj(),B,s=>s.put(e,t)&&void 0)}clear(){return Promise.all([(t=this.Aj(),e=B,Pt(t,e,t=>t.clear()).then(()=>void 0))]).then(()=>void 0);var t,e}disconnect(){return this.Al?this.Al.then(t=>{this.Al=null,t.close()}):Promise.resolve()}Aj(){return this.Al||(this.Al=this.Ak()),this.Al}Ak(){const t=indexedDB.open(S,1);return t.onupgradeneeded=(e=>{const{oldVersion:s}=e,{result:i}=t;s<1&&i.createObjectStore(B)}),function(t){return new Promise((e,s)=>{t.onsuccess=(()=>e(t.result)),t.onerror=(()=>s(t.error))})}(t).then(t=>(t.onclose=(()=>{this.Al=null}),t.onerror=(()=>{this.Al=null}),t.onversionchange=(e=>{e.newVersion||(this.Al=null,t.close())}),t))}},ne=new class{constructor(t,e,s){this.B_=[],this.B9=t,this.B$=e.open(s)}async store(t){if("function"!=typeof t.cachePath)throw new TypeError("Cannot store an object without cachePath method.");const e=t.cachePath(),s=t.toJSON();await this.B9.set(e,s),location.origin}async load(t,e=!1){if("function"!=typeof t.cachePath)throw new TypeError("Cannot store an object without cachePath method.");const s=t.cachePath(),i=await this.B9.get(s);if(null!=i)return void t.fromJSON(i);const r=await this.B$,n=await async function(t,e,s=!1){const i=await t.match(`${location.origin}${e}`);if(!i){const t=`Could not load object "${location.origin}${e}" from cache.`;if(s)throw new Error(t);return null}const r=await i.statusText;try{return Q(r)}catch(t){const i=`Object at "${e}" is not in JSON format.`;if(s)throw new Error(i);return r}}(r,s,e);null!==n&&(t.fromJSON(n),await this.B9.set(s,n))}async loadAllWatched(){await this.loadAll(...this.B_)}async loadAll(...t){await Promise.all(t.map(t=>this.load(t)))}watch(...t){for(const e of t)this.B_.push(e),e.observe(()=>this.store(e))}}(re,caches,S),ae=new St(re),oe=new class{constructor(t){this.Bu=new Map,this.Bv=[],this.Bw=t}capture(t){t.url;const e=this.Bu.get(t.url)||[];e.push(t),this.Bu.set(t.url,e)}pop(t){const e=this.Bu.get(t);return e&&e.length?(1===e.length&&this.Bu.delete(t),e.shift()):null}addNotTracked(t){this.Bv.push(t)}removeNotTracked(t){const e=this.Bv.indexOf(t);-1!==e&&this.Bv.splice(e,1)}isNotTracked(t){return-1!==this.Bv.indexOf(t)}getUnknownNavigateMetadata(t){return new ie(t,!1,!1,!0,!1,null,null,null,null,this.Bw.getSplitTestId(),this.Bw.getGroup(),!1,Ct.Origin,Et.Unknown)}}(ae),ce=new z,he=new j(ae),le=new V,ue=new K,de=new class{constructor(t){this.swCacheKeys=new WeakMap,this.Ad=t}async getSWCacheKey(t){if(this.swCacheKeys.has(t))return this.swCacheKeys.get(t);const{url:e}=t,s=await this.Ad.getQueryParameterStripConditions(t);for(const t of Array.from(e.searchParams.keys()))(this.Ad.shouldStripQueryParameter(t,s)||t===O||t===N)&&e.searchParams.delete(t);e.hash&&(e.hash=""),e.searchParams.sort();const i=e.toString();return this.swCacheKeys.set(t,i),i}}(ae),pe=new class{constructor(t,e,s,i,r){this.assetAPIKeys=new WeakMap,this.AL=t,this.AM=e,this.AN=s,this.AO=i,this.AP=r}async getAssetAPIKey(t){if(this.assetAPIKeys.has(t))return this.assetAPIKeys.get(t);const e=await this.AM.getSWCacheKey(t),s=new URL(e),i=await this.AL.getImageOptions(t),r=t=>{if(!1!==t)for(const e of p(t))if(s.searchParams.has(e)){s.searchParams.delete(e);break}};r(i.overrideWidth),r(i.overrideHeight);const n=s.toString();return this.assetAPIKeys.set(t,n),n}async createAssetAPIRequest(t){const e=await this.getAssetAPIKey(t);if(e.startsWith(this.AL.appURL))return new URL(e);const{originalRequest:s}=t,i=new URL(e),r=this.AL.getUserAgentClass(s);r&&"desktop"!==r&&i.searchParams.append("bqvariation",r);const n=this.AN.isFirstLoadHandled();n&&this.AN.firstLoadHandled(),await this.AI(t,i,n),await this.AJ(t,i);const a=new URL(`${this.AL.appURL}/asset/${i}`);return t.url,a}async AI(t,e,s){if(this.AL.sdnSetup)return void(t.isNavigateRequest()&&e.searchParams.append("bqpi","1"));const i=await t.getNavigateUrl();(s||this.AO.isNotTracked(i))&&(e.searchParams.append("bqpi","1"),this.AO.removeNotTracked(i))}async AJ(t,e){const{request:s}=t;if(s.destination,t.contentType!==n.Image)return;if(".svg"===r(e.pathname))return;const i=new URL(t.originalRequest.url).searchParams,a=function(t){const e=w(t);t.webp&&e.set("auto","webp"),100!==t.quality&&e.set("quality",`${t.quality}`),t.pjpeg&&t.pathname.match(/\.jpe?g$/i)&&e.set("format","pjpeg");const s=t.crop;if(s)if("string"==typeof s)e.set("crop",`${s},smart`);else if(s instanceof Array)if(s.length>=4){const[t,i,r,n]=s;e.set("crop",`${r},${n},x${t},y${i}`)}else if(s.length>=2){const[t,i]=s;e.set("crop",`${t},${i},smart`)}if(!1!==t.overrideWidth)for(const s of p(t.overrideWidth)){const i=t.searchParams.get(s);if(i&&!Number.isNaN(+i)){e.delete("height"),e.set("width",String(+i));break}}if(!1!==t.overrideHeight)for(const s of p(t.overrideHeight)){const i=t.searchParams.get(s);if(i&&!Number.isNaN(+i)){e.delete("width"),e.set("height",String(+i));break}}return[...e].map(t=>t.join("="))}(await this.AK(t,e.pathname,i));a.length&&(e.searchParams.append("bqoptimize","1"),e.search+=`;${a.join(";")}`)}async AK(t,e,s){const i=await this.AL.getImageOptions(t),{width:r,dpr:n}=this.AP,a=(o=t.headers.get("width")||void 0,c=(t=>parseInt(t,10)),null===o?null:void 0!==o?c(o):void 0);var o,c;return Object.assign({},i,{screenWidth:r,screenDPR:n,clientHintWidth:a,pathname:e,searchParams:s})}}(ae,de,ue,oe,le),me=new class{constructor(t,e,s){this.X=t,this.Y=e,this.Z=s}async delete(){await async function(t){const e=(await caches.keys()).filter(t).map(t=>caches.delete(t));await Promise.all(e)}(t=>t.startsWith(S)&&t.endsWith(this.X.getClientRevision())),this.X.getClientRevision()}async loadResponse(t){const e=await this.U(t);return await caches.match(await this.Z.getSWCacheKey(t),{cacheName:e})}async storeResponse(t,e){const s=this.U(t),i=await this.Z.getSWCacheKey(t);await this.putIntoCache(s,i,e)}async putIntoCache(t,e,s){const i=await caches.open(t);this.X.getClientRevision();try{await i.put(e,s)}catch(t){t.message,await this.V(),await i.put(e,s)}}U(t){const e=this.Y.getUserAgentClass(t.originalRequest)||"assets";return`${S}-${e}-${this.X.getClientRevision()}`}async V(){const t=(await caches.keys()).filter(t=>new RegExp(`^${S}-.*`).test(t));(await Promise.all(t.map(async t=>{const e=await caches.open(t);return this.W(e,[n.Image])}))).reduce((t,e)=>t+e,0)>0||await Promise.all(t.map(async t=>{const e=await caches.open(t),s=Object.keys(n);return this.W(e,s)}))}async W(t,e){const s=(await t.keys()).filter(t=>{const s=a(t);return-1!==e.indexOf(s)});return s.length?(await Promise.all(s.map(e=>t.delete(e)))).filter(t=>t).length:0}}(he,ae,de),ge=new class{constructor(t,e,s){this.loading=!1,this.disconnected=!1,this.shuttingDown=!1,this.reconnectAttempt=0,this.Aa=t,this.Ab=e,this.Ac=s}isDisconnected(){return this.disconnected}async purge(){this.Aa.purge(),await this.AW()}async initFromSWCache(){const t=await caches.open(S),e=this.AZ(),s=await caches.match(e,{cacheName:S});if(!s)return;const i=I(s)+this.Aa.getDrift()+this.Ab.refreshInterval,r=C(s.headers.get(k)),n=r.get("cachingId")||null,a=r.get("cacheKey")||R;await H(this.Aa,s,{maxAge:i,clientRevision:a,serverRevision:n}),await t.delete(e)}refreshCacheSketch(t=!1){return t||this.Aa.isExpired()?this.AW():Promise.resolve()}connect(){this.reconnectAttempt=0,this.disconnected=!1}async AV(){this.disconnected=!0,this.shuttingDown=!0,await registration.unregister()}disconnect(t=!0){if(this.disconnected=!0,!t||this.shuttingDown)return;const e=Math.min(this.Ab.reconnectInterval*Math.pow(5,this.reconnectAttempt),216e5);this.reconnectAttempt+=1,E(e).then(()=>this.AW())}async AW(){if(navigator.onLine&&!this.loading){this.loading=!0;try{await this.AX()}catch(t){this.disconnect()}finally{this.loading=!1}}}async AX(){const t=this.AY(),e=await fetch(t);if(e.status!==b.OK)return e.status===b.Forbidden?(e.status,this.AV()):(e.status,this.disconnect());e.clone();const s=C(e.headers.get(k));if("true"===s.get("disabled"))return this.disconnect();const i=this.Aa.getClientRevision(),r=s.get("cachingId")||null,n=this.Aa.getServerRevision(),a=(o=i,c=n,null===(h=r)||null===c?o:h===c?o:h);var o,c,h;a!==i&&await this.Ac.delete(),this.shuttingDown||(this.reconnectAttempt=0,this.disconnected=!1);const l=Date.now(),u=l+this.Ab.refreshInterval,d=l-I(e);await H(this.Aa,e,{maxAge:u,drift:d,serverRevision:r,clientRevision:a})}AY(){const e={[t]:"application/json"},s=new URL(this.AZ());return s.searchParams.append("BCB","1"),s.searchParams.append("skversion","1.19.0"),new Request(s.toString(),{headers:e})}AZ(){return`${this.Ab.appURL}/bloomfilter`}}(he,ae,me),fe=new class{constructor(t,e,s,i){this.Af=t,this.Ag=e,this.Ah=s,this.Ai=i}async isResponseValid(t,e){const s=await this.Ai.getAssetAPIKey(t);return!this.Af.isResponseStale(s,t.contentType,e)&&!this.isCachedResponseExpired(e)&&this.Ae(t,e)}async canTakeFromCache(t){if(!navigator.onLine||t.isCritical())return!0;if(this.Af.isInvalid())return!1;if(t.isNavigateRequest()){if("reload"===t.request.cache)return t.request.cache,this.Ag.purge(),!1;"no-cache"===t.request.cache&&(t.request.cache,this.Ag.refreshCacheSketch(!0))}const e=!this.Af.isRequestStale(await this.Ai.getAssetAPIKey(t));return e}async trackRevalidation(t){this.Af.addToRevalidationWhitelist(await this.Ai.getAssetAPIKey(t))}isCachedResponseExpired(t){const e=L(t,this.Af.getDrift());if(null!==e)return e;const s=function(t){const e=t.headers.get("expires");return e?(Date.now(),Date.now()>Date.parse(e)):null}(t);return null!==s&&s}Ae(t,e){return!(e.url&&!c(t,this.Ah.relativeModuleImports)&&(e.url,t.url.toString(),e.url.includes("/v1/asset/")))}}(he,ge,ae,pe),we=new class{constructor(){this.requestHandlers=new Set}addHandler(t){this.requestHandlers.add(t)}fetch(t){try{const e=this.requestHandlers.values(),s=this.BB(t,e);return s instanceof Promise?s.catch(e=>(e.message,Ht(t,!0,Et.Error))):s}catch(e){return e.message,Ht(t,!0,Et.Error)}}BB(t,e){const{done:s,value:i}=e.next();return s?Ht(t,!0,Et.Error):i.supportsHandling(t)?(i.constructor.name,i.handle(t,t=>(i.constructor.name,this.BB(t,e)))):this.BB(t,e)}},ve=new class{constructor(t,e){this.Bs=t,this.Bt=e}async executeFor(t){const{navigation:e}=t,s=await this.Bs.getCriticalResources(t);let i=t;for(const r of s){const s={navigation:e,dependsOn:i,critical:!0},n=t.createSubRequest(r,s);t.waitUntil(Promise.resolve(this.Bt.fetch(n))),i=n}}}(ae,we),ye=new class extends qt{constructor(t,e,s){super(xt.INSTALLING),this.G=t,this.cookieStore=e,this.H=s,this.I=[],this.G.addEventListener("fetch",t=>this.D(t)),this.G.addEventListener("message",t=>t.waitUntil(this.E(t))),this.G.addEventListener("push",t=>this.A(t)),this.G.addEventListener("notificationclick",t=>this.B(t))}run(){this.transition(xt.RUNNING)}fail(){this.transition(xt.FAILED)}skipWaiting(){this.G.addEventListener("install",t=>this.skipWaitingUntilActive())}claimClients(){this.G.addEventListener("activate",t=>t.waitUntil(this.G.clients.claim()))}pushHandler(t){this.H.addHandler(t)}pushMessage(t){this.I.push(t)}async skipWaitingUntilActive(){this.G.skipWaiting(),await E(500);const t=this.G.registration.installing||this.G.registration.waiting||this.G.registration.active;if(t&&"activated"!==t.state)return this.skipWaitingUntilActive()}A(t){if(!t.data)return;const e=t.data.json();if(e.isBaqend){const{title:s}=e;t.waitUntil(registration.showNotification(s,e))}}B(t){const{action:e,notification:s}=t;if(!s.data.isBaqend)return;const i=s.data.closeNotification;"close"!==e?(t.waitUntil(this.C(s.data.launchUrl)),i&&setTimeout(s.close.bind(s),1e4)):s.close()}async C(t){if(t)return clients.openWindow(t);const e=await clients.matchAll();return e.length>0?e[0].focus():clients.openWindow("/")}D(t){if(t.request.url,!this.F(t.request))return;const e=Rt.fromEvent(t,this.cookieStore.getCookies(location.origin));if(this.state!==xt.FAILED){if(this.state===xt.RUNNING){const s=this.H.fetch(e);return s instanceof Promise?t.respondWith(s.then(t=>t.response?(t.request,t.response):(t.request,t.request.fetchOriginal()))):s.response?(s.request,void t.respondWith(s.response)):void s.request}t.request.url,t.respondWith(this.waitUntil(xt.RUNNING,xt.FAILED).then(t=>t===xt.FAILED?e.fetchOriginal():Promise.resolve(this.H.fetch(e)).then(t=>t.response||t.request.fetchOriginal())))}else t.request.url}async E(t){await this.waitUntil(xt.RUNNING);const e=t.source;t.data;for(const s of this.I)if(await s.handle(e,t.data,t.ports?t.ports[0]:void 0))return;t.data}F(t){return function(t){return t.url.startsWith("http")}(t)?encodeURI(t.url).length>3800?(t.url,!1):"same-origin"!==t.mode||(t.url,!1):(t.url,!1)}}(self,ce,we);const Ae=new class extends Ft{constructor(t,e,s,i){super(),this.isLastNavigateHandled=!1,this.ignoreNextNavigate=!1,this.loadEvents=0,this.BH=t,this.BI=e,this.BJ=s,this.BK=i}get handledLastNavigate(){return this.isLastNavigateHandled}get loadEventCount(){return this.loadEvents}trackLoadEvent(){this.loadEvents+=1}handle(t,e){if(this.loadEvents=0,this.BK.navigationPreload&&t.preloadResponse&&!this.BK.shouldCacheRequest(t))return async function(t){const e=t.preloadResponse;if(!e)throw new TypeError("The request needs to have a Navigation Preload response.");const s=await e;return s?(t.markAsFetched(),new Lt(Ct.Origin,Et.NavigationPreload,t,Promise.resolve(s))):Ht(t,!0,Et.NavigationPreload)}(t).then(t=>this.BG(t));if(!t.modifying&&this.ignoreNextNavigate)return this.ignoreNextNavigate=!1,this.BG(Ht(t,!0,Et.IgnoredAfterPOSTNavigate));this.ignoreNextNavigate=t.modifying;const s=e(t);return s instanceof Promise?s.then(t=>this.BG(t)):this.BG(s)}supportsHandling(t){return t.isNavigateRequest()}BG(t){const{request:e}=t;return this.isLastNavigateHandled=Wt(t),this.isLastNavigateHandled,t.cause===Et.NavigationPreload&&t.waitUntil(this.BH.executeFor(e)),t}}(ve,oe,ge,ae),be=new class extends Ft{constructor(t){super(),this.BR=t,this.BS=null,this.BT=null}handle(t,e){if(!this.BR.preloadDynamicBlocks)return t.waitUntil(this.BQ(t)),e(t);const s=this.BO(t),i=this.BM(s),r=this.BM(e(t)),n=Promise.race([i,r]);return this.BN(n),t.waitUntil(Promise.all([r,i.then(()=>this.BL())])),n}supportsHandling(t){return t.isNavigateRequest()}popDynamicBlockResponse(){const t=this.BS;return t?(this.BS=null,t):null}wasOriginFasterOnNavigation(){return this.BT===Ct.Origin}async BL(){if(this.BR.navigationPreload)return E(6e4)}async BM(t){const e=await t;return await e.response,e}async BN(t){const e=await t;this.BT=e.source}BO(t){return this.BR.navigationPreload&&t.preloadResponse?this.BS=t.preloadResponse.then(e=>e?Ht(t,!0,Et.DynamicBlockPreload,e):this.BP(t)):this.BS=Promise.resolve(this.BP(t)),this.BS}BP(t){const e=t.createSubRequest(t.originalRequest.url,Object.assign({},t.originalRequest,{credentials:"include"}));jt(e,this.BR.sdnSetup,!0);const s=E(0).then(()=>e.fetch());return Ht(e,!0,Et.DynamicBlockPreload,s)}async BQ(t){if(await this.BR.shouldFetchOrigin(t.request)){await E(1e3*bt);try{if(!this.BR.sdnSetup)return void await t.fetchOriginal();const e=t.createSubRequest(t.originalRequest.url,Object.assign({},t.originalRequest,{credentials:"include"}));jt(e,!0,!0),await e.fetch()}catch(t){t.stack}}}}(ae),Se=new class{constructor(t,e,s){this.K=t,this.L=e,this.M=s}J(){return this.K.handledLastNavigate}lastNavigateFromOrigin(){return this.L.wasOriginFasterOnNavigation()||!this.J()&&!this.M.sdnSetup}popDynamicBlockResponse(){return this.L.popDynamicBlockResponse()}setDynamicBlockHeaders(t){jt(t,this.J(),this.M.sdnSetup)}}(Ae,be,ae),Be=new class extends Ft{constructor(t){super(),this.requestsInflightToPromiseMap=new Map,this.BC=t}async handle(t,e){const s=await this.BC.getSWCacheKey(t),i=this.requestsInflightToPromiseMap.get(s);if(i){const s=await i;return s.source!==Ct.SwCache||t.isCritical()?s.clone(t):e(t)}const r=t.url.searchParams.has(N);if(!t.isCritical()&&!r)return e(t);const n=Promise.resolve(e(t));this.requestsInflightToPromiseMap.set(s,n);const a=await n;return a.source!==Ct.SwCache&&a.cause!==Et.CacheHit||this.requestsInflightToPromiseMap.delete(s),a}async removeFromInflightList(t){const e=await this.BC.getSWCacheKey(t);this.requestsInflightToPromiseMap.delete(e)}supportsHandling(t){return!0}}(de),Re=new class extends Ft{constructor(t){super(),this.Bd=new Map,this.Bc=t}release(t){const e=this.Bd.get(t);e&&(e(),this.Bd.delete(t))}async handle(t,e){const s=t.navigation.clientId,i=this.Bd.get(s);return this.Bc.lastNavigateFromOrigin()?this.Bb(t):(i&&i(),t.url,new Promise(t=>{this.Bd.set(s,t)}).then(()=>this.Bb(t)))}supportsHandling(t){return t.url.pathname.endsWith("/speed-kit-dom-ready.js")}Bb(t){return Mt(t,"",{status:200,headers:{"content-type":"application/javascript","cache-control":"max-age=0, no-cache, no-store",vary:"*"}},Et.Delayed)}}(Se),ke=new class extends Ft{constructor(t,e,s,i,r){super(),this.P=t,this.Q=e,this.R=s,this.S=i,this.T=r}handle(t,e){this.T.sdnSetup||this.P.addNotTracked(t.request.url);const s=e(t);return s instanceof Promise?s.then(t=>this.N(t)):this.N(s)}supportsHandling(t){return t.isNavigateRequest()}N(t){const e=!this.S.isDisconnected()&&this.T.isEnabledOnURL(t.request.url.toString()),s=e&&this.Q.handledLastNavigate;return t.waitUntil(this.O(t,e,s)),t}async O(t,e,s){const i=await t.response;i&&zt(i)||this.P.capture(ie.fromContext(t,e,s,this.R.lastNavigateFromOrigin(),this.T.getSplitTestId(),this.T.getGroup(),i))}}(oe,Ae,Se,ge,ae);ye.pushHandler(ke),ye.pushHandler(Ae),ye.pushHandler(Re),ye.pushHandler(new class extends Ft{handle(t,e){if(t.url.href.includes("/db/speedKit.Metric")){const e=t.fetch();return new Lt(Ct.Origin,Et.Blacklist,t,e)}return t.url,t.method,Ht(t,!0,Et.Blacklist)}supportsHandling(t){return t.modifying}}),ye.pushHandler(new class extends Ft{constructor(t,e){super(),this.A_=t,this.BA=e}handle(t,e){const s=this.A_.sdnSetup;if(this.BA.lastNavigateFromOrigin())return Mt(t,null,{status:304,statusText:"Page was not served via Speed Kit"},Et.DynamicBlock);t.url;const i=this.BA.popDynamicBlockResponse();return i||(s?(this.BA.setDynamicBlockHeaders(t),Ht(t,!1,Et.DynamicBlock,t.fetch())):Ht(t,!0,Et.DynamicBlock))}supportsHandling(t){return"dynamic"===t.request.headers.get("baqend-speed-kit-request")}}(ae,Se)),ye.pushHandler(new class extends Ft{constructor(t){super(),this.A$=t}handle(t,e){return t.url,Ht(t,!0,Et.Disconnected)}supportsHandling(t){return navigator.onLine&&this.A$.isDisconnected()}}(ge)),ye.pushHandler(new class extends Ft{constructor(t,e){super(),this.Av=t,this.Aw=e}handle(t,e){return t.url,t.isNavigateRequest()&&t.waitUntil(this.Av.executeFor(t)),Ht(t,!0,Et.Blacklist)}supportsHandling(t){return!t.prewarm&&!this.Aw.shouldCacheRequest(t)&&!this.Aw.shouldDelayRequest(t)}}(ve,ae)),ye.pushHandler(new class extends Ft{constructor(t,e){super(),this.BE=t,this.BF=e}async handle(t,e){t.mark(this.BE);const s=e(t);return t.waitUntil(Promise.resolve(s).then(async t=>{await t.response,t.request.mark(this.BF)})),s}supportsHandling(t){return!0}}("handleStart","handleEnd")),ye.pushHandler(new class extends Ft{constructor(t){super(),this.A8=t}handle(t,e){const{url:s}=t;return s.searchParams.get(O)?(s.searchParams.delete(O),t.url=s,Ht(t,!1,Et.Delayed,t.fetch())):Promise.resolve().then(async()=>await this.A8.isEnabledOnSite(t)?this.A4(t,e):e(t))}supportsHandling(t){return this.A8.shouldDelayRequest(t)}async A4(t,e){return t.contentType===n.Script?this.A5(t):t.contentType===n.Image?this.A6(t):e(t)}A5(t){const e=t.url;e.searchParams.append(O,"1");const s=this.A8.getDelayOptions(t);return Mt(t,`(function(){\n const thisNode = document.currentScript;\n function loadScript() {\n const scr = document.createElement('script');\n for (let i = 0, len = thisNode.attributes.length; i < len; i++) {\n var attr = thisNode.attributes.item(i);\n scr.setAttribute(attr.nodeName, attr.nodeValue);\n }\n scr.async = true;\n scr.src = '${e}';\n thisNode.parentNode.replaceChild(scr, thisNode);\n }\n function delayAfter(cb) { ${s.event===yt.SPEED_KIT_DYNAMIC_LOADED?"\n if (document.documentElement.classList.contains('speed-kit-dynamic-loaded')) {\n return cb();\n }\n document.addEventListener('speed-kit-loaded', () => {\n cb();\n });":"\n if (document.readyState === 'complete') {\n return cb();\n }\n document.addEventListener('readystatechange', () => {\n if (document.readyState === 'complete') {\n cb();\n }\n });"} }\n delayAfter(() => {\n window.setTimeout(() => {\n loadScript();\n }, ${s.timeout});\n });\n})();\n`,this.A7("application/javascript; charset=utf-8"),Et.Delayed)}A6(t){const e=Uint8Array.from([71,73,70,56,57,97,1,0,1,0,128,0,0,0,0,0,255,255,255,33,249,4,1,0,0,0,0,44,0,0,0,0,1,0,1,0,0,2,1,68,0,59]);return E(1e3).then(()=>t.fetchOriginal()).catch(console.error),Mt(t,e,this.A7("image/gif"),Et.Delayed)}A7(t){return{headers:{[i]:t}}}}(ae)),ye.pushHandler(new class extends Ft{constructor(t){super(),this.A9=t}async handle(t,e){return await this.A9.isEnabledOnSite(t)?e(t):Ht(t,!0,Et.Disabled)}supportsHandling(t){return!t.prewarm}}(ae)),ye.pushHandler(new class extends Ft{constructor(t){super(),this.BD=t}handle(t,e){return t.url,t.waitUntil(this.BD.refreshCacheSketch()),e(t)}supportsHandling(t){return!0}}(ge)),ye.pushHandler(Be),ye.pushHandler(be),ye.pushHandler(new class extends Ft{constructor(){super(...arguments),this.Be=new $t}async handle(t,e){const s=e(t),i=await s,r=await i.response;return Wt(i)&&r&&zt(r)?this.resolvePossibleLoop(t,i,r):(this.Be.clear(),i)}resolvePossibleLoop(t,e,s){if(this.Be.addRedirect(t.request,s)){const e=t.fetchOriginal();return e.then(()=>this.Be.clear()),t.markAsFetched(),new Lt(Ct.Origin,Et.LoopDetected,t,e)}return e}supportsHandling(t){return t.isNavigateRequest()}}),ye.pushHandler(new class extends Ft{constructor(t,e,s,i){super(),this.BX=t,this.BY=e,this.Ba=i,this.BZ=s}async handle(t,e){const s=await this.BU(t);if(s)return s;t.url;const i=await e(t);if(!navigator.onLine&&i.cause===Et.Error){const e=await this.BU(t);if(e)return e}return this.BV(t,i)}supportsHandling(t){return!0}async BU(t){if(!await this.BY.canTakeFromCache(t))return null;t.mark("cacheStart");const e=await this.BX.loadResponse(t);return t.mark("cacheEnd"),e?(t.url,t.isCritical()?Ut(t,!0,Et.CriticalResource,e):navigator.onLine?await this.BY.isResponseValid(t,e)?(t.url,Ut(t,!0,Et.CacheHit,e)):null:(t.url,Ut(t,!0,Et.Offline,e))):null}async BV(t,e){return this.Ba.cachingDisabled||!e.response?(t.url,await this.BZ.removeFromInflightList(t),e):(t.waitUntil(this.BW(t,e)),e)}async BW(t,e){try{const s=await e.response;s&&e.source===Ct.AssetAPI&&s.status<400&&s.status>=200&&(await this.BX.storeResponse(t,s.clone()),await this.BY.trackRevalidation(t))}catch(e){t.url,e.message}await this.BZ.removeFromInflightList(t)}}(me,fe,Be,ae)),ye.pushHandler(new class extends Ft{constructor(t,e,s){super(),this.A1=t,this.A2=e,this.A3=s}handle(t,e){return t.waitUntil(this.A0(t)),e(t)}supportsHandling(t){return t.isNavigateRequest()}async A0(t){if(!this.A3.hasCriticalResources())return;const e=await this.A2.loadResponse(t);e||await this.A1.executeFor(t)}}(ve,me,ae)),ye.pushHandler(new class extends Ft{constructor(t){super(),this.Ay=t;const[e,s]=q(navigator.userAgent);this.Az=!("Chrome"===e&&s<64||"Firefox"===e&&s<61)}async handle(t,e){const s=await this.Ax(t);return s?Ht(t,!0,Et.CacheHit,s):e(t)}supportsHandling(t){return this.Az&&t.isSameOrigin()&&!t.isNavigateRequest()}async Ax(t){const e=t.originalRequest.url;try{const t=await fetch(e,{mode:"same-origin",cache:"only-if-cached"});if(!this.Ay.isCachedResponseExpired(t))return t}catch(t){}return null}}(fe)),ye.pushHandler(new class extends Ft{constructor(t,e,s){super(),this.As=t,this.At=e,this.Au=s}async handle(t){t.url=await this.Au.createAssetAPIRequest(t);const e=await this.An(t);return e.status===b.BaqendRedirect?this.Ao(t,e):e.status>=b.BadRequest||e.status=b.InternalServerError)try{const e=await t.fetchOriginal();return e.status>=b.InternalServerError?Jt(t,e):(this.At.isDisconnected()||this.At.disconnect(),Ht(t,!0,Et.Error,e))}catch(e){const s=e instanceof TypeError?b.FetchTypeError:b.BadGateway;return Jt(t,new Response(e.message,{status:s}))}return e.status,Ht(t,!0,Et.ClientError)}Aq(t){return t.isSameOrigin()?"same-origin":t.request.headers.has("origin")||t.request.url.startsWith(this.As.appURL.toLowerCase())?"cors":"no-cors"}Ar(t,e){return c(t,this.As.relativeModuleImports)?(t.url,Tt(t,!1,Et.CacheMiss,e)):function(t,e={}){const{status:s,statusText:i,headers:r}=t,n=Object.assign({status:s,statusText:i,headers:r},e);if(!t.body)return Dt(t,n);try{return Promise.resolve(new Response(t.body,n))}catch(e){return Dt(t,n)}}(e).then(e=>(Object.defineProperty(e,"url",{value:t.originalRequest.url.toString()}),t.url,Tt(t,!1,Et.CacheMiss,e)))}}(ae,ge,pe)),ye.pushMessage(new Yt(oe)),ye.pushMessage(new Gt(ge)),ye.pushMessage(new Qt(ge)),ye.pushMessage(new Vt(ge)),ye.pushMessage(new _t(ae,me,ge,ce,we)),ye.pushMessage(new Xt(ge,Ae,ce)),ye.pushMessage(new te(Re)),ye.skipWaiting(),ye.claimClients(),ne.watch(ae,ce,he,ue,le),ne.loadAllWatched().then(async()=>{he.isInitialized()||await ge.initFromSWCache(),ae.preloadBloomFilter&&ge.refreshCacheSketch(),ye.run()}).catch(t=>{ye.fail()});
